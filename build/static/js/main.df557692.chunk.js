(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,n){},110:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(46),i=n.n(c),o=n(117),u=n(119),l=n(116),d=n(6),s=n(5),p=n(7),m=n(8),f=n.n(m),b=n(16),h=n(11),y=n(12),v=n(14),E=n(13),g=n(15),j=n(115);function O(){var e=Object(p.a)(["\n  query DraftsQuery {\n    drafts {\n      id\n      title\n      content\n      category\n      due_date\n      published\n    }\n  }\n"]);return O=function(){return e},e}var w=function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.Query,{query:k},function(t){var n=t.data,c=t.loading,i=t.error,o=t.refetch;return c?r.a.createElement("div",{className:"flex w-100 h-100 items-center justify-center pt7"},r.a.createElement("div",null,"Loading ...")):i?r.a.createElement("div",{className:"flex w-100 h-100 items-center justify-center pt7"},r.a.createElement("div",null,"An unexpected error occured.")):r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"flex justify-between items-center"},r.a.createElement("h1",null,"Drafts")),n.drafts&&n.drafts.map(function(e){return r.a.createElement(q,{key:e.id,post:e,refresh:function(){return o()},isDraft:!e.published})}),e.props.children)})}}]),t}(a.Component),k=Object(s.b)(O());function $(){var e=Object(p.a)(["\n  mutation DeleteMutatoin($id: ID!) {\n    deletePost(id: $id) {\n      id\n    }\n  }\n"]);return $=function(){return e},e}function _(){var e=Object(p.a)(["\n  mutation PublishMutation($id: ID!) {\n    publish(id: $id) {\n      id\n      published\n    }\n  }\n"]);return _=function(){return e},e}var q=function(e){function t(){var e,n;Object(h.a)(this,t);for(var c=arguments.length,i=new Array(c),o=0;o<c;o++)i[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(i))))._renderAction=function(e){var t=e.id,c=r.a.createElement(d.Mutation,{mutation:Q,update:function(e,t){var n=t.data,a=(e.readQuery({query:k}).drafts,e.readQuery({query:U}).feed);e.writeQuery({query:U,data:{feed:a.concat([n.publish])}}),e.writeQuery({query:k})}},function(e,a){a.data,a.loading,a.error;return r.a.createElement("button",{className:"btn-picto",onClick:Object(b.a)(f.a.mark(function n(){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({variables:{id:t}});case 2:window.location.replace("/");case 3:case"end":return n.stop()}},n,this)}))},n.props.post.published?"check_box":"check_box_outline_blank")}),i=r.a.createElement(d.Mutation,{mutation:x,update:function(e,t){var n=t.data,a=e.readQuery({query:U}).feed;e.writeQuery({query:U,data:{feed:a.filter(function(e){return e.id!==n.deletePost.id})}});var r=e.readQuery({query:k}).drafts;e.writeQuery({query:k,data:{drafts:r.filter(function(e){return e.id!==n.deletePost.id})}})}},function(e,n){n.data,n.loading,n.error;return r.a.createElement("a",{onClick:function(){var n=Object(b.a)(f.a.mark(function n(a){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Are you sure you want to delete this item?")){n.next=5;break}return n.next=3,e({variables:{id:t}});case 3:n.next=6;break;case 5:a.preventDefault();case 6:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},"delete")});return r.a.createElement(a.Fragment,null,c,i)},n}return Object(g.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){console.log("Post.Js props",this.props),console.log(this._renderAction(this.props.post.id));var e=this._renderAction(this.props.post),t=this.props.post.title,n=this.props.post.content,a=this.props.post.category,c=this.props.post.due_date,i="";return i=!1===this.props.post.published?"Pending":"Completed",this.props.isDraft&&(t="".concat(t," (Draft)")),r.a.createElement("li",null,r.a.createElement("span",{className:"label"},r.a.createElement(j.a,{className:"no-underline ma1",to:"/edit/".concat(this.props.post.id)},t),r.a.createElement("br",null),r.a.createElement("span",{className:"smalldescription"},"Description: ",n,r.a.createElement("br",null),"Status: ",i,r.a.createElement("br",null),"Category: ",a,r.a.createElement("br",null),"Due Date: ",c)),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{className:"btn-picto",type:"button","aria-label":"Delete",title:"Delete"},r.a.createElement("i",{"aria-hidden":"true",className:"material-icons"},e))))}}]),t}(a.Component),Q=Object(s.b)(_()),x=Object(s.b)($()),D=n(118);function N(){var e=Object(p.a)(["\n  mutation CreateDraftMutation($title: String!, $content: String!, $category: String!, $due_date: String!) {\n    createDraft(title: $title, content: $content, category: $category, due_date: $due_date) {\n      id\n      title\n      content\n      category\n      due_date\n    }\n  }\n"]);return N=function(){return e},e}var C=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",content:"",category:"",due_date:""},n}return Object(g.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.Mutation,{mutation:S,update:function(e,t){var n=t.data,a=e.readQuery({query:k}).drafts;console.log(n),e.writeQuery({query:k,data:{drafts:a.concat([n.createDraft])}})}},function(t,n){n.data,n.loading,n.error;return r.a.createElement("div",{className:"background"},r.a.createElement("h2",null,"Add task"),r.a.createElement("form",{onSubmit:function(){var n=Object(b.a)(f.a.mark(function n(a){var r,c,i,o,u;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r=e.state,c=r.title,i=r.content,o=r.category,u=r.due_date,n.next=4,t({variables:{title:c,content:i,category:o,due_date:u}});case 4:e.props.history.replace("/drafts"),e.props.history.replace("/");case 6:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col"},r.a.createElement("input",{autoFocus:!0,className:"form-control",onChange:function(t){return e.setState({title:t.target.value})},placeholder:"Add a to do...",type:"text",value:e.state.title}),r.a.createElement("br",null)),r.a.createElement("div",{className:"col"},r.a.createElement("input",{className:"form-control",onChange:function(t){return e.setState({content:t.target.value})},placeholder:"Add description...",rows:8,value:e.state.content}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("select",{id:"inputState",className:"form-control",onChange:function(t){return e.setState({category:t.target.value})},value:e.state.category},r.a.createElement("option",{default:!0},"Select Category"),r.a.createElement("option",null,"Chores"),r.a.createElement("option",null,"Entertainment"),r.a.createElement("option",null,"Family"),r.a.createElement("option",null,"Work"))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("input",{className:"form-control",onChange:function(t){return e.setState({due_date:t.target.value})},placeholder:"Add due_date...",type:"date",value:e.state.due_date}))),r.a.createElement("div",null),r.a.createElement("button",{type:"submit"},"Add TODO")))})}}]),t}(a.Component),S=Object(s.b)(N()),A=Object(D.a)(C),P=n(32),F=n.n(P);function M(){var e=Object(p.a)(["\n  query FeedQuery {\n    feed {\n      id\n      title\n      content\n      due_date\n      published\n    }\n  }\n"]);return M=function(){return e},e}var I=function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.Query,{query:T},function(t){var n=t.data,c=t.loading,i=t.error,o=t.refetch;return c?r.a.createElement("div",null,r.a.createElement(F.a,{type:"TailSpin",color:"#b0b1b4",height:"100",width:"100"})):i?r.a.createElement("div",{className:"flex w-100 h-100 items-center justify-center pt7"},r.a.createElement("div",null,"An unexpected error occured.")):r.a.createElement(a.Fragment,null,r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"Completed Tasks",r.a.createElement("span",null,"Your completed tasks."))),n.feed&&n.feed.map(function(e){return r.a.createElement(q,{key:e.id,post:e,refresh:function(){return o()},isDraft:!e.published})}),e.props.children)})}}]),t}(a.Component),T=Object(s.b)(M());function L(){var e=Object(p.a)(["\n  mutation PublishMutation($id: ID!) {\n    publish(id: $id) {\n      id\n      published\n    }\n  }\n"]);return L=function(){return e},e}function J(){var e=Object(p.a)(["\n  mutation CreateDraftMutation($title: String!, $content: String!, $category: String!, $due_date: String!) {\n    createDraft(title: $title, content: $content) {\n      id\n      title\n      content\n      category\n      due_date\n    }\n  }\n"]);return J=function(){return e},e}function W(){var e=Object(p.a)(["\n  query FeedQuery {\n    feed {\n      id\n      title\n      published\n    }\n  }\n"]);return W=function(){return e},e}var Y=function(e){function t(){var e,n;Object(h.a)(this,t);for(var c=arguments.length,i=new Array(c),o=0;o<c;o++)i[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(i)))).state={title:""},n._renderAction=function(e){var t=e.id,n=e.published,c=r.a.createElement(d.Mutation,{mutation:B,update:function(e,t){var n=t.data,a=(e.readQuery({query:k}).drafts,e.readQuery({query:U}).feed);e.writeQuery({query:U,data:{feed:a.concat([n.publish])}}),e.writeQuery({query:k})}},function(e,n){n.data,n.loading,n.error;return r.a.createElement("a",{className:"f6 dim br1 ba ph3 pv2 mb2 dib black pointer",onClick:Object(b.a)(f.a.mark(function n(){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({variables:{id:t}});case 2:case"end":return n.stop()}},n,this)}))},"Publish")});if(!n)return r.a.createElement(a.Fragment,null,c)},n}return Object(g.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.Query,{query:k},function(t){var n=t.data,c=t.loading,i=t.error,o=t.refetch;return c?r.a.createElement("div",{className:"spinnerStyl"},r.a.createElement(F.a,{type:"Puff",color:"#3f51b5",height:"200",width:"200"})):i?r.a.createElement("div",{className:"flex w-100 h-100 items-center justify-center pt7"},r.a.createElement("div",null,"An unexpected error occured.")):r.a.createElement(a.Fragment,null,r.a.createElement("main",{id:"todolist"},r.a.createElement("h1",null,"Yael's TO-DO List",r.a.createElement("span",null,"You can add, edit, and delete tasks.")),r.a.createElement("br",null),r.a.createElement(A,null),r.a.createElement("ul",null,n.drafts&&n.drafts.map(function(e){return r.a.createElement(q,{key:e.id,post:e,refresh:function(){return o()}})}),e.props.children)),r.a.createElement("main",{id:"donelist"},r.a.createElement(I,null)))})}}]),t}(a.Component),U=Object(s.b)(W()),B=(Object(s.b)(J()),Object(s.b)(L()));function z(){var e=Object(p.a)(["\n  mutation DeleteMutatoin($id: ID!) {\n    deletePost(id: $id) {\n      id\n    }\n  }\n"]);return z=function(){return e},e}function G(){var e=Object(p.a)(["\n  mutation PublishMutation($id: ID!) {\n    publish(id: $id) {\n      id\n      published\n    }\n  }\n"]);return G=function(){return e},e}function H(){var e=Object(p.a)(["\n  query PostQuery($id: ID!) {\n    post(id: $id) {\n      id\n      title\n      published\n    }\n  }\n"]);return H=function(){return e},e}var K=function(e){function t(){var e,n;Object(h.a)(this,t);for(var c=arguments.length,i=new Array(c),o=0;o<c;o++)i[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(i))))._renderAction=function(e){var t=e.id,c=e.published,i=r.a.createElement(d.Mutation,{mutation:V,update:function(e,t){var n=t.data,a=e.readQuery({query:k}).drafts,r=e.readQuery({query:U}).feed;e.writeQuery({query:U,data:{feed:r.concat([n.publish])}}),e.writeQuery({query:k,data:{drafts:a.filter(function(e){return e.id!==n.publish.id})}})}},function(e,a){a.data,a.loading,a.error;return r.a.createElement("a",{className:"f6 dim br1 ba ph3 pv2 mb2 dib black pointer",onClick:Object(b.a)(f.a.mark(function a(){return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e({variables:{id:t}});case 2:n.props.history.replace("/");case 3:case"end":return a.stop()}},a,this)}))},"Publish")}),o=r.a.createElement(d.Mutation,{mutation:X,update:function(e,t){var n=t.data;if(c){var a=e.readQuery({query:U}).feed;e.writeQuery({query:U,data:{feed:a.filter(function(e){return e.id!==n.deletePost.id})}})}else{var r=e.readQuery({query:k}).drafts;e.writeQuery({query:k,data:{drafts:r.filter(function(e){return e.id!==n.deletePost.id})}})}}},function(e,a){a.data,a.loading,a.error;return r.a.createElement("a",{className:"f6 dim br1 ba ph3 pv2 mb2 dib black pointer",onClick:Object(b.a)(f.a.mark(function a(){return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e({variables:{id:t}});case 2:n.props.history.replace("/");case 3:case"end":return a.stop()}},a,this)}))},"Delete")});return c?o:r.a.createElement(a.Fragment,null,i,o)},n}return Object(g.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this;return console.log("DetailsPage ====> ",this.props),r.a.createElement(d.Query,{query:R,variables:{id:this.props.match.params.id}},function(t){var n=t.data,c=t.loading,i=t.error;if(c)return r.a.createElement("div",{className:"flex w-100 h-100 items-center justify-center pt7"},r.a.createElement("div",null,"Loading ..."));if(i)return r.a.createElement("div",{className:"flex w-100 h-100 items-center justify-center pt7"},r.a.createElement("div",null,"An unexpected error occured."));var o=n.post,u=e._renderAction(o);return r.a.createElement(a.Fragment,null,r.a.createElement("h1",{className:"f3 black-80 fw4 lh-solid"},n.post.title),u)})}}]),t}(a.Component),R=Object(s.b)(H()),V=Object(s.b)(G()),X=Object(s.b)(z()),Z=Object(D.a)(K);function ee(){var e=Object(p.a)(["\n  mutation UpdateMutation($id: ID!, $title: String, $content: String, $category: String, $due_date: String) {\n    update(id: $id, title: $title, content: $content, category: $category, due_date: $due_date) {\n      id\n      title\n      content\n      category\n      due_date\n    }\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(p.a)(["\n  query PostQuery($id: ID!) {\n    post(id: $id) {\n      id\n      title\n      content\n      category\n      due_date\n      published\n    }\n  }\n"]);return te=function(){return e},e}var ne=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).state={title:"",content:"",category:"",due_date:""},n._renderAction=function(e){return r.a.createElement(d.Mutation,{mutation:re,update:function(e,t){var n=t.data,a=(e.readQuery({query:k}).drafts,e.readQuery({query:U}).feed);e.writeQuery({query:U,data:{feed:a.concat([n.update])}}),e.writeQuery({query:k,data:{feed:a.concat([n.update])}})}},function(t,a){a.data,a.loading,a.error;return r.a.createElement("main",{id:"todolist"},r.a.createElement("div",{className:"background"},r.a.createElement("h2",null,"Edit Task"),r.a.createElement("form",{onSubmit:function(){var a=Object(b.a)(f.a.mark(function a(r){var c,i,o,u,l,d;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),console.log("id",n.props.match.params.id),console.log(n.state),c=e.id,console.log(c),i=n.state,o=i.title,u=i.content,l=i.category,d=i.due_date,a.next=8,t({variables:{id:c,title:o,content:u,category:l,due_date:d}});case 8:n.props.history.replace("/drafts"),n.props.history.replace("/");case 10:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},r.a.createElement("input",{autoFocus:!0,onChange:function(e){return n.setState({title:e.target.value})},placeholder:e.title,type:"text"}),"\xa0",r.a.createElement("input",{onChange:function(e){return n.setState({content:e.target.value})},placeholder:e.content,rows:8}),r.a.createElement("br",null),r.a.createElement("select",{onChange:function(e){return n.setState({category:e.target.value})},placeholder:"Select Category",name:"category"},r.a.createElement("option",null,e.category),r.a.createElement("option",{value:"Chores"},"Chores"),r.a.createElement("option",{value:"Entertainment"},"Entertainment"),r.a.createElement("option",{value:"Family"},"Family"),r.a.createElement("option",{value:"Work"},"Work")),"\xa0",r.a.createElement("input",{onChange:function(e){return n.setState({due_date:e.target.value})},type:"date",placeholder:e.due_date,rows:8,value:n.state.due_date}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Update Task"))))})},n}return Object(g.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.Query,{query:ae,variables:{id:this.props.match.params.id}},function(t){var n=t.data,a=t.loading,c=t.error,i=(t.refetch,n.id,n.post),o=e._renderAction(i);return a?"Loading...":c?"Error! ".concat(c.message):r.a.createElement("div",null,o)})}}]),t}(a.Component),ae=Object(s.b)(te()),re=Object(s.b)(ee()),ce=Object(D.a)(ne),ie=(n(103),n(105),new s.a({uri:"http://localhost:4000"}));i.a.render(r.a.createElement(d.ApolloProvider,{client:ie},r.a.createElement(o.a,null,r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"fl w-100 pl4 pr4"},r.a.createElement(u.a,null,r.a.createElement(l.a,{exact:!0,path:"/",component:Y}),r.a.createElement(l.a,{path:"/drafts",component:w}),r.a.createElement(l.a,{path:"/posts",component:I}),r.a.createElement(l.a,{path:"/create",component:A}),r.a.createElement(l.a,{path:"/post/:id",component:Z}),r.a.createElement(l.a,{path:"/edit/:id",component:ce})))))),document.getElementById("root"))},53:function(e,t,n){e.exports=n(110)}},[[53,2,1]]]);
//# sourceMappingURL=main.df557692.chunk.js.map